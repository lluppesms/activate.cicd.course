# ------------------------------------------------------------------------------------------------------------------------
# Run this GHA Workflow to deploy a simple resource with the token name
# Then set the GitHub Variable RESOURCE_TOKEN to that value generated by this workflow
# ------------------------------------------------------------------------------------------------------------------------
# You need to set up secrets in the GitHub Secrets Repository before running these workflows - see CreateGitHubSecrets.md
# --\----------------------------------------------------------------------------------------------------------------------
name: 1.generate.token.workflow
on: workflow_dispatch
jobs:
  create-infra:
    name: Create Infra
    uses: ./.github/workflows/template-create-infra.yml
    secrets: inherit
    permissions:
      id-token: write
      contents: read
      actions: read
      issues: read
      checks: write
    with:
      envCode: 'dev'
      templatePath: './infra/bicep/'
      templateFile: 'generatetoken.bicep'
